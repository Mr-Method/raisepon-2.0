<?php
include ("common.php");
include ("classes.php");
navigation();
if ($user_class < "9")
	exit();


$onu_obj = new onu();

//POST METHOD
if ($_SERVER["REQUEST_METHOD"] == "POST") {
	if ($onu_obj->getSubmit() == "ADD") {
		$onu_obj->create_onu();	
	}
	if ($onu_obj->getSubmit() == "EDIT") {
		$onu_obj->edit_onu();	
	}
	if ($onu_obj->getSubmit() == "DELETE") {
		$onu_obj->delete_onu();	
	}
}





// BUILD EXISTING TABLE

print "<p><center>ONU Configuration</p>";
print "<table border=1 cellpadding=1 cellspacing=1><tr align=center style=font-weight:bold><td>ID</td><td>NAME</td><td>PORTS</td><td>RF</td><td>PSE</td><td>HGU</td></tr>";

$onu_obj->build_table_onu();

print "</table>";

//GET METHOD
if ($_SERVER["REQUEST_METHOD"] == "GET") {
	$onu_obj->get_data_onu();
}

print "<form action=\"onu.php\" method=\"post\">";
if (null !== $onu_obj->getOnu_id())
	print "<input type=\"hidden\" name=\"onu_id\" value=\"". $onu_obj->getOnu_id() ."\">";


//BUILD FORM


print "<p><table>";
print "<tr><td>Name*:</td><td><input type=\"text\" name=\"name\""; if(isset($onu_obj->name)) print "value=\"" . $onu_obj->name . "\""; print "></td></tr>";
print "<tr><td>PORTS*:</td><td><input type=\"text\" name=\"ports\""; if(isset($onu_obj->ports)) print "value=\"" . $onu_obj->ports . "\""; print "></td></tr>";
print "<tr><td>RF:</td><td><input type=\"checkbox\" name=\"rf\" value=\"1\""; if($onu_obj->rf == "1") print " checked"; print "></td></tr>";
print "<tr><td>PSE:</td><td><input type=\"checkbox\" name=\"pse\" value=\"1\""; if($onu_obj->pse == "1") print " checked"; print "></td>";
print "<tr><td>HGU:</td><td><input type=\"checkbox\" name=\"hgu\" value=\"1\""; if($onu_obj->hgu == "1") print " checked"; print "></td>";
print "</table></p>";
$edit = (isset($_GET['edit']) ? $_GET['edit'] : null);
if ($edit == "1" || null !== $onu_obj->getOnu_id()) {
	print "<input type='submit' name='SUBMIT' value='EDIT'>";
	print "&nbsp;&nbsp;&nbsp;<input type='submit' name='SUBMIT' value='DELETE'>";
}else{
	print "<button type='submit' name='SUBMIT' class="btn btn-default">ADD</button>";
}
print "</center>";
?>
